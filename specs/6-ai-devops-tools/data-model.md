# Data Model: AI DevOps Tools Integration

**Feature**: 6-ai-devops-tools
**Date**: 2026-01-21
**Status**: Draft

## AI Command Mapping

### Natural Language Command Structure
- **Input**: Natural language command (e.g., "deploy frontend with 2 replicas")
- **Parsed Intent**: Action (deploy), resource type (deployment), parameters (replicas=2, name=frontend)
- **Kubernetes API Mapping**: Corresponding Kubernetes API call with parameters
- **Generated YAML**: Resulting Kubernetes resource definition
- **Validation Status**: Human review status for AI-generated artifacts

## Diagnostic Report Schema

### Cluster Health Report
- **Metadata**:
  - Report ID: Unique identifier for the diagnostic report
  - Timestamp: When the analysis was performed
  - Cluster Name: Name of the analyzed cluster
  - Analyzer Version: Version of kagent used for analysis
- **Health Summary**:
  - Overall Status: Healthy, Warning, or Unhealthy
  - Severity Score: Numeric score representing overall cluster health
  - Critical Issues Count: Number of critical issues found
  - Warning Issues Count: Number of warning issues found
- **Resource Allocation**:
  - Node Resources: CPU/memory usage per node
  - Namespace Resources: Resource allocation by namespace
  - Pod Resources: Resource usage by pod
  - Recommendations: Suggestions for optimizing resource allocation

### Performance Metrics
- **Response Times**: Average response times for different Kubernetes operations
- **Resource Utilization Trends**: Historical data on resource usage patterns
- **Capacity Planning Data**: Recommendations for scaling based on usage trends

## Dockerfile Template Schema

### AI-Generated Dockerfile Structure
- **Build Stage Configuration**:
  - Base Image Selection: AI-selected optimal base image
  - Dependencies: Required build-time dependencies
  - Build Commands: AI-generated build instructions
- **Runtime Stage Configuration**:
  - Runtime Image: Minimal production base image
  - Application Files: Files copied from build stage
  - Non-root User: Security configuration for container execution
- **Optimization Elements**:
  - Layer Caching: Optimized layer structure for efficient caching
  - Cleanup Commands: Proper cleanup of build artifacts
  - Security Scans: Integration points for security scanning

## PHR Documentation Schema

### AI Interaction Record
- **Interaction Metadata**:
  - Interaction ID: Unique identifier for the AI interaction
  - Timestamp: When the interaction occurred
  - Tool Used: Which AI tool was used (kubectl-ai, kagent, Gordon)
  - User: Who initiated the interaction
- **Input Data**:
  - Natural Language Command: Original user input
  - Context Information: Relevant contextual information provided
- **Output Data**:
  - Generated Artifacts: Files or YAML generated by the AI tool
  - Execution Result: Success, partial success, or failure
  - Quality Metrics: Assessment of AI-generated output quality
- **Review Status**:
  - Human Review Required: Whether human review is needed
  - Review Status: Pending, approved, or rejected
  - Approval Timestamp: When review was completed
  - Reviewer Comments: Feedback from human reviewer