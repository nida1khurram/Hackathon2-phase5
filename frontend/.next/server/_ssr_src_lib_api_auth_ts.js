"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_ssr_src_lib_api_auth_ts";
exports.ids = ["_ssr_src_lib_api_auth_ts"];
exports.modules = {

/***/ "(ssr)/./src/lib/api/auth.ts":
/*!*****************************!*\
  !*** ./src/lib/api/auth.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authAPI: () => (/* binding */ authAPI)\n/* harmony export */ });\n// frontend/src/lib/api/auth.ts\nconst API_BASE_URL = \"http://localhost:8000\" || 0;\nclass AuthAPI {\n    async register(data) {\n        const response = await fetch(`${API_BASE_URL}/auth/register`, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(data)\n        });\n        if (!response.ok) {\n            // Handle case where response might not be JSON\n            const contentType = response.headers.get(\"content-type\");\n            if (contentType && contentType.includes(\"application/json\")) {\n                const errorData = await response.json();\n                throw new Error(errorData.detail || \"Registration failed\");\n            } else {\n                // If it's not JSON, return a generic error\n                const errorText = await response.text();\n                throw new Error(`Registration failed: ${response.status} ${response.statusText}. Details: ${errorText}`);\n            }\n        }\n        return response.json();\n    }\n    async login(credentials) {\n        const response = await fetch(`${API_BASE_URL}/auth/login`, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(credentials)\n        });\n        if (!response.ok) {\n            // Handle case where response might not be JSON\n            const contentType = response.headers.get(\"content-type\");\n            if (contentType && contentType.includes(\"application/json\")) {\n                const errorData = await response.json();\n                throw new Error(errorData.detail || \"Login failed\");\n            } else {\n                // If it's not JSON, return a generic error\n                const errorText = await response.text();\n                throw new Error(`Login failed: ${response.status} ${response.statusText}. Details: ${errorText}`);\n            }\n        }\n        return response.json();\n    }\n    getToken() {\n        return localStorage.getItem(\"auth_token\");\n    }\n    getAuthToken() {\n        return localStorage.getItem(\"auth_token\");\n    }\n    isAuthenticated() {\n        // Check if there's a token in localStorage\n        const token = localStorage.getItem(\"auth_token\");\n        return !!token;\n    }\n    async logout() {\n        try {\n            // Call the backend logout endpoint\n            const token = localStorage.getItem(\"auth_token\");\n            if (token) {\n                await fetch(`${API_BASE_URL}/auth/logout`, {\n                    method: \"POST\",\n                    headers: {\n                        \"Authorization\": `Bearer ${token}`,\n                        \"Content-Type\": \"application/json\"\n                    }\n                });\n            }\n        } catch (error) {\n            // Even if the backend call fails, still clear the local token\n            console.error(\"Logout error (ignored):\", error);\n        } finally{\n            // Always clear the auth token from localStorage\n            localStorage.removeItem(\"auth_token\");\n        }\n    }\n}\nconst authAPI = new AuthAPI();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUM7UUFDMUI7SUFDRjtBQUNGO0FBRU8sTUFBTUMsVUFBVSxJQUFJbEMsVUFBVSIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG8tZnJvbnRlbmQvLi9zcmMvbGliL2FwaS9hdXRoLnRzPzg4M2MiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZnJvbnRlbmQvc3JjL2xpYi9hcGkvYXV0aC50c1xuXG5jb25zdCBBUElfQkFTRV9VUkwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUElfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OjgwMDAnO1xuXG5pbnRlcmZhY2UgTG9naW5DcmVkZW50aWFscyB7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIHBhc3N3b3JkOiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBSZWdpc3RlckRhdGEge1xuICBlbWFpbDogc3RyaW5nO1xuICBwYXNzd29yZDogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgTG9naW5SZXNwb25zZSB7XG4gIGFjY2Vzc190b2tlbjogc3RyaW5nO1xuICB0b2tlbl90eXBlOiBzdHJpbmc7XG4gIHVzZXI6IHtcbiAgICBpZDogbnVtYmVyO1xuICAgIGVtYWlsOiBzdHJpbmc7XG4gIH07XG59XG5cbmludGVyZmFjZSBVc2VyIHtcbiAgaWQ6IG51bWJlcjtcbiAgZW1haWw6IHN0cmluZztcbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICBpc19hY3RpdmU6IGJvb2xlYW47XG59XG5cbmNsYXNzIEF1dGhBUEkge1xuICBhc3luYyByZWdpc3RlcihkYXRhOiBSZWdpc3RlckRhdGEpOiBQcm9taXNlPFVzZXI+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke0FQSV9CQVNFX1VSTH0vYXV0aC9yZWdpc3RlcmAsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgIH0pO1xuXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgLy8gSGFuZGxlIGNhc2Ugd2hlcmUgcmVzcG9uc2UgbWlnaHQgbm90IGJlIEpTT05cbiAgICAgIGNvbnN0IGNvbnRlbnRUeXBlID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpO1xuICAgICAgaWYgKGNvbnRlbnRUeXBlICYmIGNvbnRlbnRUeXBlLmluY2x1ZGVzKCdhcHBsaWNhdGlvbi9qc29uJykpIHtcbiAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JEYXRhLmRldGFpbCB8fCAnUmVnaXN0cmF0aW9uIGZhaWxlZCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSWYgaXQncyBub3QgSlNPTiwgcmV0dXJuIGEgZ2VuZXJpYyBlcnJvclxuICAgICAgICBjb25zdCBlcnJvclRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgUmVnaXN0cmF0aW9uIGZhaWxlZDogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH0uIERldGFpbHM6ICR7ZXJyb3JUZXh0fWApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gIH1cblxuICBhc3luYyBsb2dpbihjcmVkZW50aWFsczogTG9naW5DcmVkZW50aWFscyk6IFByb21pc2U8TG9naW5SZXNwb25zZT4ge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7QVBJX0JBU0VfVVJMfS9hdXRoL2xvZ2luYCwge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoY3JlZGVudGlhbHMpLFxuICAgIH0pO1xuXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgLy8gSGFuZGxlIGNhc2Ugd2hlcmUgcmVzcG9uc2UgbWlnaHQgbm90IGJlIEpTT05cbiAgICAgIGNvbnN0IGNvbnRlbnRUeXBlID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpO1xuICAgICAgaWYgKGNvbnRlbnRUeXBlICYmIGNvbnRlbnRUeXBlLmluY2x1ZGVzKCdhcHBsaWNhdGlvbi9qc29uJykpIHtcbiAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JEYXRhLmRldGFpbCB8fCAnTG9naW4gZmFpbGVkJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBJZiBpdCdzIG5vdCBKU09OLCByZXR1cm4gYSBnZW5lcmljIGVycm9yXG4gICAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBMb2dpbiBmYWlsZWQ6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9LiBEZXRhaWxzOiAke2Vycm9yVGV4dH1gKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICB9XG5cbiAgZ2V0VG9rZW4oKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhdXRoX3Rva2VuJyk7XG4gIH1cblxuICBnZXRBdXRoVG9rZW4oKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhdXRoX3Rva2VuJyk7XG4gIH1cblxuICBpc0F1dGhlbnRpY2F0ZWQoKTogYm9vbGVhbiB7XG4gICAgLy8gQ2hlY2sgaWYgdGhlcmUncyBhIHRva2VuIGluIGxvY2FsU3RvcmFnZVxuICAgIGNvbnN0IHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2F1dGhfdG9rZW4nKTtcbiAgICByZXR1cm4gISF0b2tlbjtcbiAgfVxuXG4gIGFzeW5jIGxvZ291dCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgLy8gQ2FsbCB0aGUgYmFja2VuZCBsb2dvdXQgZW5kcG9pbnRcbiAgICAgIGNvbnN0IHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2F1dGhfdG9rZW4nKTtcbiAgICAgIGlmICh0b2tlbikge1xuICAgICAgICBhd2FpdCBmZXRjaChgJHtBUElfQkFTRV9VUkx9L2F1dGgvbG9nb3V0YCwge1xuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3Rva2VufWAsXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBFdmVuIGlmIHRoZSBiYWNrZW5kIGNhbGwgZmFpbHMsIHN0aWxsIGNsZWFyIHRoZSBsb2NhbCB0b2tlblxuICAgICAgY29uc29sZS5lcnJvcignTG9nb3V0IGVycm9yIChpZ25vcmVkKTonLCBlcnJvcik7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIC8vIEFsd2F5cyBjbGVhciB0aGUgYXV0aCB0b2tlbiBmcm9tIGxvY2FsU3RvcmFnZVxuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2F1dGhfdG9rZW4nKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGF1dGhBUEkgPSBuZXcgQXV0aEFQSSgpOyJdLCJuYW1lcyI6WyJBUElfQkFTRV9VUkwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfQVBJX1VSTCIsIkF1dGhBUEkiLCJyZWdpc3RlciIsImRhdGEiLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5Iiwib2siLCJjb250ZW50VHlwZSIsImdldCIsImluY2x1ZGVzIiwiZXJyb3JEYXRhIiwianNvbiIsIkVycm9yIiwiZGV0YWlsIiwiZXJyb3JUZXh0IiwidGV4dCIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJsb2dpbiIsImNyZWRlbnRpYWxzIiwiZ2V0VG9rZW4iLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiZ2V0QXV0aFRva2VuIiwiaXNBdXRoZW50aWNhdGVkIiwidG9rZW4iLCJsb2dvdXQiLCJlcnJvciIsImNvbnNvbGUiLCJyZW1vdmVJdGVtIiwiYXV0aEFQSSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/lib/api/auth.ts\n");

/***/ })

};
;